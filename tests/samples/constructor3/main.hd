import std.io as io
import std.string

class Pixel:
    r : u8
    g : u8
    b : u8

    def init : void
        r = 0
        g = 0
        b = 0

        io::println("build pixel 1")

    def init : void
        @rv : u8
        @gv : u8
        @bv : u8

        r = rv
        g = gv
        b = bv
        io::println("build pixel 2")

    def println : void
        io::println("($r, $g, $b)")

    def destroy : void
        io::println("destroying pixel")

class Pixel2(Pixel):
    def init : void
        io::println("build pixel2")

    def destroy : void
        io::println("destroy pixel2")

class Pixel3(Pixel2):
    def init : void
        io::println("build pixel3")

    def destroy : void
        io::println("destroy pixel3")

def main : void
    for i = 0; i < 4; ++i:
        p = Pixel3()
        println("point 1")

        if i == 0 or i == 2:
            p2 = Pixel2()

        println("point 2")
